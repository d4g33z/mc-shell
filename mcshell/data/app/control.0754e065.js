let t,e;import"./mced.4ec3b53e.js";function n(t,e,n,i){Object.defineProperty(t,e,{get:n,set:i,enumerable:!0,configurable:!0})}var i,o,r=globalThis,s={},a={},l=r.parcelRequirea483;null==l&&((l=function(t){if(t in s)return s[t].exports;if(t in a){var e=a[t];delete a[t];var n={id:t,exports:{}};return s[t]=n,e.call(n.exports,n,n.exports),n.exports}var i=Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,e){a[t]=e},r.parcelRequirea483=l),l.register;var h=l("hKdZU");function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(){return(p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function f(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var g=f(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),m=f(/Edge/i),v=f(/firefox/i),y=f(/safari/i)&&!f(/chrome/i)&&!f(/android/i),b=f(/iP(ad|od|hone)/i),w=f(/chrome/i)&&f(/android/i),_={capture:!1,passive:!1};function E(t,e,n){t.addEventListener(e,n,!g&&_)}function S(t,e,n){t.removeEventListener(e,n,!g&&_)}function T(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){}return!1}}function k(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function C(t,e,n,i){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentNode===n&&T(t,e):T(t,e))||i&&t===n)return t;if(t===n)break}while(t=k(t))}return null}var O=/\s+/g;function x(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(O," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(O," ")}}function A(t,e,n){var i=t&&t.style;if(i)if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];else e in i||-1!==e.indexOf("webkit")||(e="-webkit-"+e),i[e]=n+("string"==typeof n?"":"px")}function D(t,e){var n="";if("string"==typeof t)n=t;else do{var i=A(t,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!e&&(t=t.parentNode))var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function N(t,e,n){if(t){var i=t.getElementsByTagName(e),o=0,r=i.length;if(n)for(;o<r;o++)n(i[o],o);return i}return[]}function R(){var t=document.scrollingElement;return t||document.documentElement}function P(t,e,n,i,o){if(t.getBoundingClientRect||t===window){if(t!==window&&t.parentNode&&t!==R()?(s=(r=t.getBoundingClientRect()).top,a=r.left,l=r.bottom,h=r.right,c=r.height,u=r.width):(s=0,a=0,l=window.innerHeight,h=window.innerWidth,c=window.innerHeight,u=window.innerWidth),(e||n)&&t!==window&&(o=o||t.parentNode,!g))do if(o&&o.getBoundingClientRect&&("none"!==A(o,"transform")||n&&"static"!==A(o,"position"))){var r,s,a,l,h,c,u,d=o.getBoundingClientRect();s-=d.top+parseInt(A(o,"border-top-width")),a-=d.left+parseInt(A(o,"border-left-width")),l=s+r.height,h=a+r.width;break}while(o=o.parentNode)if(i&&t!==window){var p=D(o||t),f=p&&p.a,m=p&&p.d;p&&(s/=m,a/=f,u/=f,c/=m,l=s+c,h=a+u)}return{top:s,left:a,bottom:l,right:h,width:u,height:c}}}function B(t,e,n){for(var i=q(t,!0),o=P(t)[e];i;){var r=P(i)[n],s=void 0;if(!("top"===n||"left"===n?o>=r:o<=r))return i;if(i===R())break;i=q(i,!1)}return!1}function I(t,e,n,i){for(var o=0,r=0,s=t.children;r<s.length;){if("none"!==s[r].style.display&&s[r]!==tH.ghost&&(i||s[r]!==tH.dragged)&&C(s[r],n.draggable,t,!1)){if(o===e)return s[r];o++}r++}return null}function L(t,e){for(var n=t.lastElementChild;n&&(n===tH.ghost||"none"===A(n,"display")||e&&!T(n,e));)n=n.previousElementSibling;return n||null}function M(t,e){var n=0;if(!t||!t.parentNode)return -1;for(;t=t.previousElementSibling;)"TEMPLATE"!==t.nodeName.toUpperCase()&&t!==tH.clone&&(!e||T(t,e))&&n++;return n}function j(t){var e=0,n=0,i=R();if(t)do{var o=D(t),r=o.a,s=o.d;e+=t.scrollLeft*r,n+=t.scrollTop*s}while(t!==i&&(t=t.parentNode))return[e,n]}function q(t,e){if(!t||!t.getBoundingClientRect)return R();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=A(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return R();if(i||e)return n;i=!0}}while(n=n.parentNode)return R()}function F(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function Y(t,e){return function(){if(!Q){var n=arguments;1===n.length?t.call(this,n[0]):t.apply(this,n),Q=setTimeout(function(){Q=void 0},e)}}}function U(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function X(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function H(t,e,n){var i={};return Array.from(t.children).forEach(function(o){if(C(o,e.draggable,t,!1)&&!o.animated&&o!==n){var r,s,a,l,h=P(o);i.left=Math.min(null!=(r=i.left)?r:1/0,h.left),i.top=Math.min(null!=(s=i.top)?s:1/0,h.top),i.right=Math.max(null!=(a=i.right)?a:-1/0,h.right),i.bottom=Math.max(null!=(l=i.bottom)?l:-1/0,h.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var W="Sortable"+new Date().getTime(),V=[],z={initializeByDefault:!0},$={mount:function(t){for(var e in z)!z.hasOwnProperty(e)||e in t||(t[e]=z[e]);V.forEach(function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),V.push(t)},pluginEvent:function(t,e,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var o=t+"Global";V.forEach(function(i){e[i.pluginName]&&(e[i.pluginName][o]&&e[i.pluginName][o](u({sortable:e},n)),e.options[i.pluginName]&&e[i.pluginName][t]&&e[i.pluginName][t](u({sortable:e},n)))})},initializePlugins:function(t,e,n,i){for(var o in V.forEach(function(i){var o=i.pluginName;if(t.options[o]||i.initializeByDefault){var r=new i(t,e,t.options);r.sortable=t,r.options=t.options,t[o]=r,p(n,r.defaults)}}),t.options)if(t.options.hasOwnProperty(o)){var r=this.modifyOption(t,o,t.options[o]);void 0!==r&&(t.options[o]=r)}},getEventProperties:function(t,e){var n={};return V.forEach(function(i){"function"==typeof i.eventProperties&&p(n,i.eventProperties.call(e[i.pluginName],t))}),n},modifyOption:function(t,e,n){var i;return V.forEach(function(o){t[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[e]&&(i=o.optionListeners[e].call(t[o.pluginName],n))}),i}},K=["evt"],J=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.evt,o=function(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(n,K);$.pluginEvent.bind(tH)(t,e,u({dragEl:Z,parentEl:tt,ghostEl:te,rootEl:tn,nextEl:ti,lastDownEl:to,cloneEl:tr,cloneHidden:ts,dragStarted:tb,putSortable:td,activeSortable:tH.active,originalEvent:i,oldIndex:ta,oldDraggableIndex:th,newIndex:tl,newDraggableIndex:tc,hideGhostForTarget:tF,unhideGhostForTarget:tY,cloneNowHidden:function(){ts=!0},cloneNowShown:function(){ts=!1},dispatchSortableEvent:function(t){G({sortable:e,name:t,originalEvent:i})}},o))};function G(t){!function(t){var e=t.sortable,n=t.rootEl,i=t.name,o=t.targetEl,r=t.cloneEl,s=t.toEl,a=t.fromEl,l=t.oldIndex,h=t.newIndex,c=t.oldDraggableIndex,d=t.newDraggableIndex,p=t.originalEvent,f=t.putSortable,v=t.extraEventProperties;if(e=e||n&&n[W]){var y,b=e.options,w="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||g||m?(y=document.createEvent("Event")).initEvent(i,!0,!0):y=new CustomEvent(i,{bubbles:!0,cancelable:!0}),y.to=s||n,y.from=a||n,y.item=o||n,y.clone=r,y.oldIndex=l,y.newIndex=h,y.oldDraggableIndex=c,y.newDraggableIndex=d,y.originalEvent=p,y.pullMode=f?f.lastPutMode:void 0;var _=u(u({},v),$.getEventProperties(i,e));for(var E in _)y[E]=_[E];n&&n.dispatchEvent(y),b[w]&&b[w].call(e,y)}}(u({putSortable:td,cloneEl:tr,targetEl:Z,rootEl:tn,oldIndex:ta,oldDraggableIndex:th,newIndex:tl,newDraggableIndex:tc},t))}var Q,Z,tt,te,tn,ti,to,tr,ts,ta,tl,th,tc,tu,td,tp,tf,tg,tm,tv,ty,tb,tw,t_,tE,tS,tT=!1,tk=!1,tC=[],tO=!1,tx=!1,tA=[],tD=!1,tN=[],tR="undefined"!=typeof document,tP=m||g?"cssFloat":"float",tB=tR&&!w&&!b&&"draggable"in document.createElement("div"),tI=function(){if(tR){if(g)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),tL=function(t,e){var n=A(t),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=I(t,0,e),r=I(t,1,e),s=o&&A(o),a=r&&A(r),l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+P(o).width,h=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+P(r).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&s.float&&"none"!==s.float){var c="left"===s.float?"left":"right";return r&&("both"===a.clear||a.clear===c)?"vertical":"horizontal"}return o&&("block"===s.display||"flex"===s.display||"table"===s.display||"grid"===s.display||l>=i&&"none"===n[tP]||r&&"none"===n[tP]&&l+h>i)?"vertical":"horizontal"},tM=function(t,e,n){var i=n?t.left:t.top,o=n?t.right:t.bottom,r=n?t.width:t.height,s=n?e.left:e.top,a=n?e.right:e.bottom,l=n?e.width:e.height;return i===s||o===a||i+r/2===s+l/2},tj=function(t,e){var n;return tC.some(function(i){var o=i[W].options.emptyInsertThreshold;if(!(!o||L(i))){var r=P(i),s=t>=r.left-o&&t<=r.right+o,a=e>=r.top-o&&e<=r.bottom+o;if(s&&a)return n=i}}),n},tq=function(t){function e(t,n){return function(i,o,r,s){var a=i.options.group.name&&o.options.group.name&&i.options.group.name===o.options.group.name;if(null==t&&(n||a))return!0;if(null==t||!1===t)return!1;if(n&&"clone"===t)return t;if("function"==typeof t)return e(t(i,o,r,s),n)(i,o,r,s);var l=(n?i:o).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var n={},i=t.group;i&&"object"==d(i)||(i={name:i}),n.name=i.name,n.checkPull=e(i.pull,!0),n.checkPut=e(i.put),n.revertClone=i.revertClone,t.group=n},tF=function(){!tI&&te&&A(te,"display","none")},tY=function(){!tI&&te&&A(te,"display","")};tR&&!w&&document.addEventListener("click",function(t){if(tk)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),tk=!1,!1},!0);var tU=function(t){if(Z){var e=tj((t=t.touches?t.touches[0]:t).clientX,t.clientY);if(e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[W]._onDragOver(n)}}},tX=function(t){Z&&Z.parentNode[W]._isOutsideThisEl(t.target)};function tH(t,e){if(!(t&&t.nodeType&&1===t.nodeType))throw"Sortable: `el` must be an HTMLElement, not ".concat(({}).toString.call(t));this.el=t,this.options=e=p({},e),t[W]=this;var n,i,o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return tL(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==tH.supportPointer&&"PointerEvent"in window&&(!y||b),emptyInsertThreshold:5};for(var r in $.initializePlugins(this,t,o),o)r in e||(e[r]=o[r]);for(var s in tq(e),this)"_"===s.charAt(0)&&"function"==typeof this[s]&&(this[s]=this[s].bind(this));this.nativeDraggable=!e.forceFallback&&tB,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?E(t,"pointerdown",this._onTapStart):(E(t,"mousedown",this._onTapStart),E(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(E(t,"dragover",this),E(t,"dragenter",this)),tC.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),p(this,(i=[],{captureAnimationState:function(){i=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(t){if("none"!==A(t,"display")&&t!==tH.ghost){i.push({target:t,rect:P(t)});var e=u({},i[i.length-1].rect);if(t.thisAnimationDuration){var n=D(t,!0);n&&(e.top-=n.f,e.left-=n.e)}t.fromRect=e}})},addAnimationState:function(t){i.push(t)},removeAnimationState:function(t){i.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n)}return -1}(i,{target:t}),1)},animateAll:function(t){var e=this;if(!this.options.animation){clearTimeout(n),"function"==typeof t&&t();return}var o=!1,r=0;i.forEach(function(t){var n,i,s,a,l=0,h=t.target,c=h.fromRect,u=P(h),d=h.prevFromRect,p=h.prevToRect,f=t.rect,g=D(h,!0);g&&(u.top-=g.f,u.left-=g.e),h.toRect=u,h.thisAnimationDuration&&F(d,u)&&!F(c,u)&&(f.top-u.top)/(f.left-u.left)==(c.top-u.top)/(c.left-u.left)&&(n=f,i=d,s=p,a=e.options,l=Math.sqrt(Math.pow(i.top-n.top,2)+Math.pow(i.left-n.left,2))/Math.sqrt(Math.pow(i.top-s.top,2)+Math.pow(i.left-s.left,2))*a.animation),F(u,c)||(h.prevFromRect=c,h.prevToRect=u,l||(l=e.options.animation),e.animate(h,f,u,l)),l&&(o=!0,r=Math.max(r,l),clearTimeout(h.animationResetTimer),h.animationResetTimer=setTimeout(function(){h.animationTime=0,h.prevFromRect=null,h.fromRect=null,h.prevToRect=null,h.thisAnimationDuration=null},l),h.thisAnimationDuration=l)}),clearTimeout(n),o?n=setTimeout(function(){"function"==typeof t&&t()},r):"function"==typeof t&&t(),i=[]},animate:function(t,e,n,i){if(i){A(t,"transition",""),A(t,"transform","");var o=D(this.el),r=o&&o.a,s=o&&o.d,a=(e.left-n.left)/(r||1),l=(e.top-n.top)/(s||1);t.animatingX=!!a,t.animatingY=!!l,A(t,"transform","translate3d("+a+"px,"+l+"px,0)"),this.forRepaintDummy=t.offsetWidth,A(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),A(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout(function(){A(t,"transition",""),A(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},i)}}}))}function tW(t,e,n,i,o,r,s,a){var l,h,c=t[W],u=c.options.onMove;return!window.CustomEvent||g||m?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=n,l.draggedRect=i,l.related=o||e,l.relatedRect=r||P(e),l.willInsertAfter=a,l.originalEvent=s,t.dispatchEvent(l),u&&(h=u.call(c,l,s)),h}function tV(t){t.draggable=!1}function tz(){tD=!1}function t$(t){return setTimeout(t,0)}function tK(t){return clearTimeout(t)}tH.prototype={constructor:tH,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(tw=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,Z):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,i=this.options,o=i.preventOnFilter,r=t.type,s=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,a=(s||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||a,h=i.filter;if(function(t){tN.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&tN.push(i)}}(n),!(Z||/mousedown|pointerdown/.test(r)&&0!==t.button||i.disabled||l.isContentEditable||!this.nativeDraggable&&y&&a&&"SELECT"===a.tagName.toUpperCase()||(a=C(a,i.draggable,n,!1))&&a.animated)&&to!==a){if(ta=M(a),th=M(a,i.draggable),"function"==typeof h){if(h.call(this,t,a,this)){G({sortable:e,rootEl:l,name:"filter",targetEl:a,toEl:n,fromEl:n}),J("filter",e,{evt:t}),o&&t.preventDefault();return}}else if(h&&(h=h.split(",").some(function(i){if(i=C(l,i.trim(),n,!1))return G({sortable:e,rootEl:i,name:"filter",targetEl:a,fromEl:n,toEl:n}),J("filter",e,{evt:t}),!0}))){o&&t.preventDefault();return}(!i.handle||C(l,i.handle,n,!1))&&this._prepareDragStart(t,s,a)}}},_prepareDragStart:function(t,e,n){var i,o=this,r=o.el,s=o.options,a=r.ownerDocument;if(n&&!Z&&n.parentNode===r){var l=P(n);if(tn=r,tt=(Z=n).parentNode,ti=Z.nextSibling,to=n,tu=s.group,tH.dragged=Z,tv=(tp={target:Z,clientX:(e||t).clientX,clientY:(e||t).clientY}).clientX-l.left,ty=tp.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,Z.style["will-change"]="all",i=function(){if(J("delayEnded",o,{evt:t}),tH.eventCanceled)return void o._onDrop();o._disableDelayedDragEvents(),!v&&o.nativeDraggable&&(Z.draggable=!0),o._triggerDragStart(t,e),G({sortable:o,name:"choose",originalEvent:t}),x(Z,s.chosenClass,!0)},s.ignore.split(",").forEach(function(t){N(Z,t.trim(),tV)}),E(a,"dragover",tU),E(a,"mousemove",tU),E(a,"touchmove",tU),s.supportPointer?(E(a,"pointerup",o._onDrop),this.nativeDraggable||E(a,"pointercancel",o._onDrop)):(E(a,"mouseup",o._onDrop),E(a,"touchend",o._onDrop),E(a,"touchcancel",o._onDrop)),v&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Z.draggable=!0),J("delayStart",this,{evt:t}),!s.delay||s.delayOnTouchOnly&&!e||this.nativeDraggable&&(m||g))i();else{if(tH.eventCanceled)return void this._onDrop();s.supportPointer?(E(a,"pointerup",o._disableDelayedDrag),E(a,"pointercancel",o._disableDelayedDrag)):(E(a,"mouseup",o._disableDelayedDrag),E(a,"touchend",o._disableDelayedDrag),E(a,"touchcancel",o._disableDelayedDrag)),E(a,"mousemove",o._delayedDragTouchMoveHandler),E(a,"touchmove",o._delayedDragTouchMoveHandler),s.supportPointer&&E(a,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(i,s.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Z&&tV(Z),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;S(t,"mouseup",this._disableDelayedDrag),S(t,"touchend",this._disableDelayedDrag),S(t,"touchcancel",this._disableDelayedDrag),S(t,"pointerup",this._disableDelayedDrag),S(t,"pointercancel",this._disableDelayedDrag),S(t,"mousemove",this._delayedDragTouchMoveHandler),S(t,"touchmove",this._delayedDragTouchMoveHandler),S(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?E(document,"pointermove",this._onTouchMove):e?E(document,"touchmove",this._onTouchMove):E(document,"mousemove",this._onTouchMove):(E(Z,"dragend",this),E(tn,"dragstart",this._onDragStart));try{document.selection?t$(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(tT=!1,tn&&Z){J("dragStarted",this,{evt:e}),this.nativeDraggable&&E(document,"dragover",tX);var n=this.options;t||x(Z,n.dragClass,!1),x(Z,n.ghostClass,!0),tH.active=this,t&&this._appendGhost(),G({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(tf){this._lastX=tf.clientX,this._lastY=tf.clientY,tF();for(var t=document.elementFromPoint(tf.clientX,tf.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(tf.clientX,tf.clientY))!==e;)e=t;if(Z.parentNode[W]._isOutsideThisEl(t),e)do{if(e[W]){var n=void 0;if(e[W]._onDragOver({clientX:tf.clientX,clientY:tf.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}t=e}while(e=k(e))tY()}},_onTouchMove:function(t){if(tp){var e=this.options,n=e.fallbackTolerance,i=e.fallbackOffset,o=t.touches?t.touches[0]:t,r=te&&D(te,!0),s=te&&r&&r.a,a=te&&r&&r.d,l=b&&tS&&j(tS),h=(o.clientX-tp.clientX+i.x)/(s||1)+(l?l[0]-tA[0]:0)/(s||1),c=(o.clientY-tp.clientY+i.y)/(a||1)+(l?l[1]-tA[1]:0)/(a||1);if(!tH.active&&!tT){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(te){r?(r.e+=h-(tg||0),r.f+=c-(tm||0)):r={a:1,b:0,c:0,d:1,e:h,f:c};var u="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");A(te,"webkitTransform",u),A(te,"mozTransform",u),A(te,"msTransform",u),A(te,"transform",u),tg=h,tm=c,tf=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!te){var t=this.options.fallbackOnBody?document.body:tn,e=P(Z,!0,b,!0,t),n=this.options;if(b){for(tS=t;"static"===A(tS,"position")&&"none"===A(tS,"transform")&&tS!==document;)tS=tS.parentNode;tS!==document.body&&tS!==document.documentElement?(tS===document&&(tS=R()),e.top+=tS.scrollTop,e.left+=tS.scrollLeft):tS=R(),tA=j(tS)}x(te=Z.cloneNode(!0),n.ghostClass,!1),x(te,n.fallbackClass,!0),x(te,n.dragClass,!0),A(te,"transition",""),A(te,"transform",""),A(te,"box-sizing","border-box"),A(te,"margin",0),A(te,"top",e.top),A(te,"left",e.left),A(te,"width",e.width),A(te,"height",e.height),A(te,"opacity","0.8"),A(te,"position",b?"absolute":"fixed"),A(te,"zIndex","100000"),A(te,"pointerEvents","none"),tH.ghost=te,t.appendChild(te),A(te,"transform-origin",tv/parseInt(te.style.width)*100+"% "+ty/parseInt(te.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,i=t.dataTransfer,o=n.options;if(J("dragStart",this,{evt:t}),tH.eventCanceled)return void this._onDrop();J("setupClone",this),tH.eventCanceled||((tr=X(Z)).removeAttribute("id"),tr.draggable=!1,tr.style["will-change"]="",this._hideClone(),x(tr,this.options.chosenClass,!1),tH.clone=tr),n.cloneId=t$(function(){J("clone",n),tH.eventCanceled||(n.options.removeCloneOnHide||tn.insertBefore(tr,Z),n._hideClone(),G({sortable:n,name:"clone"}))}),e||x(Z,o.dragClass,!0),e?(tk=!0,n._loopId=setInterval(n._emulateDragOver,50)):(S(document,"mouseup",n._onDrop),S(document,"touchend",n._onDrop),S(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(n,i,Z)),E(document,"drop",n),A(Z,"transform","translateZ(0)")),tT=!0,n._dragStartId=t$(n._dragStarted.bind(n,e,t)),E(document,"selectstart",n),tb=!0,window.getSelection().removeAllRanges(),y&&A(document.body,"user-select","none")},_onDragOver:function(t){var e,n,i,o,r=this.el,s=t.target,a=this.options,l=a.group,h=tH.active,c=tu===l,d=a.sort,p=td||h,f=this,g=!1;if(!tD){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),s=C(s,a.draggable,r,!0),to("dragOver"),tH.eventCanceled)return g;if(Z.contains(t.target)||s.animated&&s.animatingX&&s.animatingY||f._ignoreWhileAnimating===s)return ts(!1);if(tk=!1,h&&!a.disabled&&(c?d||(i=tt!==tn):td===this||(this.lastPutMode=tu.checkPull(this,h,Z,t))&&l.checkPut(this,h,Z,t))){if(o="vertical"===this._getDirection(t,s),e=P(Z),to("dragOverValid"),tH.eventCanceled)return g;if(i)return tt=tn,tr(),this._hideClone(),to("revert"),tH.eventCanceled||(ti?tn.insertBefore(Z,ti):tn.appendChild(Z)),ts(!0);var m=L(r,a.draggable);if(!m||(y=t,b=o,w=this,_=P(L(w.el,w.options.draggable)),E=H(w.el,w.options,te),(b?y.clientX>E.right+10||y.clientY>_.bottom&&y.clientX>_.left:y.clientY>E.bottom+10||y.clientX>_.right&&y.clientY>_.top)&&!m.animated)){if(m===Z)return ts(!1);if(m&&r===t.target&&(s=m),s&&(n=P(s)),!1!==tW(tn,r,Z,e,s,n,t,!!s))return tr(),m&&m.nextSibling?r.insertBefore(Z,m.nextSibling):r.appendChild(Z),tt=r,ta(),ts(!0)}else if(m&&(S=t,T=o,k=this,O=P(I(k.el,0,k.options,!0)),D=H(k.el,k.options,te),T?S.clientX<D.left-10||S.clientY<O.top&&S.clientX<O.right:S.clientY<D.top-10||S.clientY<O.bottom&&S.clientX<O.left)){var v=I(r,0,a,!0);if(v===Z)return ts(!1);if(n=P(s=v),!1!==tW(tn,r,Z,e,s,n,t,!1))return tr(),r.insertBefore(Z,v),tt=r,ta(),ts(!0)}else if(s.parentNode===r){n=P(s);var y,b,w,_,E,S,T,k,O,D,N,R,j=0,q=Z.parentNode!==r,F=!tM(Z.animated&&Z.toRect||e,s.animated&&s.toRect||n,o),Y=o?"top":"left",X=B(s,"top","top")||B(Z,"top","top"),V=X?X.scrollTop:void 0;if(tw!==s&&(R=n[Y],tO=!1,tx=!F&&a.invertSwap||q),0!==(j=function(t,e,n,i,o,r,s,a){var l,h=i?t.clientY:t.clientX,c=i?n.height:n.width,u=i?n.top:n.left,d=i?n.bottom:n.right,p=!1;if(!s){if(a&&tE<c*o){if(!tO&&(1===t_?h>u+c*r/2:h<d-c*r/2)&&(tO=!0),tO)p=!0;else if(1===t_?h<u+tE:h>d-tE)return-t_}else if(h>u+c*(1-o)/2&&h<d-c*(1-o)/2){return l=e,M(Z)<M(l)?1:-1}}return(p=p||s)&&(h<u+c*r/2||h>d-c*r/2)?h>u+c/2?1:-1:0}(t,s,n,o,F?1:a.swapThreshold,null==a.invertedSwapThreshold?a.swapThreshold:a.invertedSwapThreshold,tx,tw===s))){var z=M(Z);do z-=j,N=tt.children[z];while(N&&("none"===A(N,"display")||N===te))}if(0===j||N===s)return ts(!1);tw=s,t_=j;var $=s.nextElementSibling,K=!1,Q=tW(tn,r,Z,e,s,n,t,K=1===j);if(!1!==Q)return(1===Q||-1===Q)&&(K=1===Q),tD=!0,setTimeout(tz,30),tr(),K&&!$?r.appendChild(Z):s.parentNode.insertBefore(Z,K?$:s),X&&U(X,0,V-X.scrollTop),tt=Z.parentNode,void 0===R||tx||(tE=Math.abs(R-P(s)[Y])),ta(),ts(!0)}if(r.contains(Z))return ts(!1)}return!1}function to(a,l){J(a,f,u({evt:t,isOwner:c,axis:o?"vertical":"horizontal",revert:i,dragRect:e,targetRect:n,canSort:d,fromSortable:p,target:s,completed:ts,onMove:function(n,i){return tW(tn,r,Z,e,n,P(n),t,i)},changed:ta},l))}function tr(){to("dragOverAnimationCapture"),f.captureAnimationState(),f!==p&&p.captureAnimationState()}function ts(e){return to("dragOverCompleted",{insertion:e}),e&&(c?h._hideClone():h._showClone(f),f!==p&&(x(Z,td?td.options.ghostClass:h.options.ghostClass,!1),x(Z,a.ghostClass,!0)),td!==f&&f!==tH.active?td=f:f===tH.active&&td&&(td=null),p===f&&(f._ignoreWhileAnimating=s),f.animateAll(function(){to("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(s!==Z||Z.animated)&&(s!==r||s.animated)||(tw=null),a.dragoverBubble||t.rootEl||s===document||(Z.parentNode[W]._isOutsideThisEl(t.target),e||tU(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function ta(){tl=M(Z),tc=M(Z,a.draggable),G({sortable:f,name:"change",toEl:r,newIndex:tl,newDraggableIndex:tc,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){S(document,"mousemove",this._onTouchMove),S(document,"touchmove",this._onTouchMove),S(document,"pointermove",this._onTouchMove),S(document,"dragover",tU),S(document,"mousemove",tU),S(document,"touchmove",tU)},_offUpEvents:function(){var t=this.el.ownerDocument;S(t,"mouseup",this._onDrop),S(t,"touchend",this._onDrop),S(t,"pointerup",this._onDrop),S(t,"pointercancel",this._onDrop),S(t,"touchcancel",this._onDrop),S(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;if(tl=M(Z),tc=M(Z,n.draggable),J("drop",this,{evt:t}),tt=Z&&Z.parentNode,tl=M(Z),tc=M(Z,n.draggable),tH.eventCanceled)return void this._nulling();tT=!1,tx=!1,tO=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),tK(this.cloneId),tK(this._dragStartId),this.nativeDraggable&&(S(document,"drop",this),S(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),y&&A(document.body,"user-select",""),A(Z,"transform",""),t&&(tb&&(t.cancelable&&t.preventDefault(),n.dropBubble||t.stopPropagation()),te&&te.parentNode&&te.parentNode.removeChild(te),(tn===tt||td&&"clone"!==td.lastPutMode)&&tr&&tr.parentNode&&tr.parentNode.removeChild(tr),Z&&(this.nativeDraggable&&S(Z,"dragend",this),tV(Z),Z.style["will-change"]="",tb&&!tT&&x(Z,td?td.options.ghostClass:this.options.ghostClass,!1),x(Z,this.options.chosenClass,!1),G({sortable:this,name:"unchoose",toEl:tt,newIndex:null,newDraggableIndex:null,originalEvent:t}),tn!==tt?(tl>=0&&(G({rootEl:tt,name:"add",toEl:tt,fromEl:tn,originalEvent:t}),G({sortable:this,name:"remove",toEl:tt,originalEvent:t}),G({rootEl:tt,name:"sort",toEl:tt,fromEl:tn,originalEvent:t}),G({sortable:this,name:"sort",toEl:tt,originalEvent:t})),td&&td.save()):tl!==ta&&tl>=0&&(G({sortable:this,name:"update",toEl:tt,originalEvent:t}),G({sortable:this,name:"sort",toEl:tt,originalEvent:t})),tH.active&&((null==tl||-1===tl)&&(tl=ta,tc=th),G({sortable:this,name:"end",toEl:tt,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){J("nulling",this),tn=Z=tt=te=ti=tr=to=ts=tp=tf=tb=tl=tc=ta=th=tw=t_=td=tu=tH.dragged=tH.ghost=tH.clone=tH.active=null,tN.forEach(function(t){t.checked=!0}),tN.length=tg=tm=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":var e;Z&&(this._onDragOver(t),(e=t).dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault());break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,i=0,o=n.length,r=this.options;i<o;i++)C(t=n[i],r.draggable,this.el,!1)&&e.push(t.getAttribute(r.dataIdAttr)||function(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}(t));return e},sort:function(t,e){var n={},i=this.el;this.toArray().forEach(function(t,e){var o=i.children[e];C(o,this.options.draggable,i,!1)&&(n[t]=o)},this),e&&this.captureAnimationState(),t.forEach(function(t){n[t]&&(i.removeChild(n[t]),i.appendChild(n[t]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return C(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var i=$.modifyOption(this,t,e);void 0!==i?n[t]=i:n[t]=e,"group"===t&&tq(n)},destroy:function(){J("destroy",this);var t=this.el;t[W]=null,S(t,"mousedown",this._onTapStart),S(t,"touchstart",this._onTapStart),S(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(S(t,"dragover",this),S(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),tC.splice(tC.indexOf(this.el),1),this.el=null},_hideClone:function(){!ts&&(J("hideClone",this),tH.eventCanceled||(A(tr,"display","none"),this.options.removeCloneOnHide&&tr.parentNode&&tr.parentNode.removeChild(tr),ts=!0))},_showClone:function(t){if("clone"!==t.lastPutMode)return void this._hideClone();if(ts){if(J("showClone",this),tH.eventCanceled)return;Z.parentNode!=tn||this.options.group.revertClone?ti?tn.insertBefore(tr,ti):tn.appendChild(tr):tn.insertBefore(tr,Z),this.options.group.revertClone&&this.animate(Z,tr),A(tr,"display",""),ts=!1}}},tR&&E(document,"touchmove",function(t){(tH.active||tT)&&t.cancelable&&t.preventDefault()}),tH.utils={on:E,off:S,css:A,find:N,is:function(t,e){return!!C(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:Y,closest:C,toggleClass:x,clone:X,index:M,nextTick:t$,cancelNextTick:tK,detectDirection:tL,getChild:I,expando:W},tH.get=function(t){return t[W]},tH.mount=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat(({}).toString.call(t));t.utils&&(tH.utils=u(u({},tH.utils),t.utils)),$.mount(t)})},tH.create=function(t,e){return new tH(t,e)},tH.version="1.15.6";var tJ,tG,tQ,tZ,t0,t1,t2=[],t3=!1;function t4(){t2.forEach(function(t){clearInterval(t.pid)}),t2=[]}function t8(){clearInterval(t1)}var t6=Y(function(t,e,n,i){if(e.scroll){var o,r=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,l=e.scrollSpeed,h=R(),c=!1;tG!==n&&(tG=n,t4(),tJ=e.scroll,o=e.scrollFn,!0===tJ&&(tJ=q(n,!0)));var u=0,d=tJ;do{var p=d,f=P(p),g=f.top,m=f.bottom,v=f.left,y=f.right,b=f.width,w=f.height,_=void 0,E=void 0,S=p.scrollWidth,T=p.scrollHeight,k=A(p),C=p.scrollLeft,O=p.scrollTop;p===h?(_=b<S&&("auto"===k.overflowX||"scroll"===k.overflowX||"visible"===k.overflowX),E=w<T&&("auto"===k.overflowY||"scroll"===k.overflowY||"visible"===k.overflowY)):(_=b<S&&("auto"===k.overflowX||"scroll"===k.overflowX),E=w<T&&("auto"===k.overflowY||"scroll"===k.overflowY));var x=_&&(Math.abs(y-r)<=a&&C+b<S)-(Math.abs(v-r)<=a&&!!C),D=E&&(Math.abs(m-s)<=a&&O+w<T)-(Math.abs(g-s)<=a&&!!O);if(!t2[u])for(var N=0;N<=u;N++)t2[N]||(t2[N]={});(t2[u].vx!=x||t2[u].vy!=D||t2[u].el!==p)&&(t2[u].el=p,t2[u].vx=x,t2[u].vy=D,clearInterval(t2[u].pid),(0!=x||0!=D)&&(c=!0,t2[u].pid=setInterval((function(){i&&0===this.layer&&tH.active._onTouchMove(t0);var e=t2[this.layer].vy?t2[this.layer].vy*l:0,n=t2[this.layer].vx?t2[this.layer].vx*l:0;("function"!=typeof o||"continue"===o.call(tH.dragged.parentNode[W],n,e,t,t0,t2[this.layer].el))&&U(t2[this.layer].el,n,e)}).bind({layer:u}),24))),u++}while(e.bubbleScroll&&d!==h&&(d=q(d,!1)))t3=c}},30),t5=function(t){var e=t.originalEvent,n=t.putSortable,i=t.dragEl,o=t.activeSortable,r=t.dispatchSortableEvent,s=t.hideGhostForTarget,a=t.unhideGhostForTarget;if(e){var l=n||o;s();var h=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,c=document.elementFromPoint(h.clientX,h.clientY);a(),l&&!l.el.contains(c)&&(r("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function t7(){}function t9(){}t7.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=I(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(e,i):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:t5},p(t7,{pluginName:"revertOnSpill"}),t9.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:t5},p(t9,{pluginName:"removeOnSpill"}),tH.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?E(document,"dragover",this._handleAutoScroll):this.options.supportPointer?E(document,"pointermove",this._handleFallbackAutoScroll):e.touches?E(document,"touchmove",this._handleFallbackAutoScroll):E(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?S(document,"dragover",this._handleAutoScroll):(S(document,"pointermove",this._handleFallbackAutoScroll),S(document,"touchmove",this._handleFallbackAutoScroll),S(document,"mousemove",this._handleFallbackAutoScroll)),t8(),t4(),clearTimeout(Q),Q=void 0},nulling:function(){t0=tG=tJ=t3=t1=tQ=tZ=null,t2.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var n=this,i=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,r=document.elementFromPoint(i,o);if(t0=t,e||this.options.forceAutoScrollFallback||m||g||y){t6(t,this.options,r,e);var s=q(r,!0);t3&&(!t1||i!==tQ||o!==tZ)&&(t1&&t8(),t1=setInterval(function(){var r=q(document.elementFromPoint(i,o),!0);r!==s&&(s=r,t4()),t6(t,n.options,r,e)},10),tQ=i,tZ=o)}else{if(!this.options.bubbleScroll||q(r,!0)===R())return void t4();t6(t,this.options,q(r,!1),!1)}}},p(t,{pluginName:"scroll",initializeByDefault:!0})}),tH.mount(t9,t7);var et=l("7nxqN");let ee=Object.create(null);ee.open="0",ee.close="1",ee.ping="2",ee.pong="3",ee.message="4",ee.upgrade="5",ee.noop="6";let en=Object.create(null);Object.keys(ee).forEach(t=>{en[ee[t]]=t});let ei={type:"error",data:"parser error"},eo="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),er="function"==typeof ArrayBuffer,es=t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,ea=({type:t,data:e},n,i)=>{if(eo&&e instanceof Blob)if(n)return i(e);else return el(e,i);if(er&&(e instanceof ArrayBuffer||es(e)))if(n)return i(e);else return el(new Blob([e]),i);return i(ee[t]+(e||""))},el=(t,e)=>{let n=new FileReader;return n.onload=function(){e("b"+(n.result.split(",")[1]||""))},n.readAsDataURL(t)};function eh(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let ec="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",eu="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let t=0;t<ec.length;t++)eu[ec.charCodeAt(t)]=t;let ed=t=>{let e=.75*t.length,n=t.length,i,o=0,r,s,a,l;"="===t[t.length-1]&&(e--,"="===t[t.length-2]&&e--);let h=new ArrayBuffer(e),c=new Uint8Array(h);for(i=0;i<n;i+=4)r=eu[t.charCodeAt(i)],s=eu[t.charCodeAt(i+1)],a=eu[t.charCodeAt(i+2)],l=eu[t.charCodeAt(i+3)],c[o++]=r<<2|s>>4,c[o++]=(15&s)<<4|a>>2,c[o++]=(3&a)<<6|63&l;return h},ep="function"==typeof ArrayBuffer,ef=(t,e)=>{if("string"!=typeof t)return{type:"message",data:em(t,e)};let n=t.charAt(0);return"b"===n?{type:"message",data:eg(t.substring(1),e)}:en[n]?t.length>1?{type:en[n],data:t.substring(1)}:{type:en[n]}:ei},eg=(t,e)=>ep?em(ed(t),e):{base64:!0,data:t},em=(t,e)=>"blob"===e?t instanceof Blob?t:new Blob([t]):t instanceof ArrayBuffer?t:t.buffer,ev=(t,e)=>{let n=t.length,i=Array(n),o=0;t.forEach((t,r)=>{ea(t,!1,t=>{i[r]=t,++o===n&&e(i.join("\x1e"))})})},ey=(t,e)=>{let n=t.split("\x1e"),i=[];for(let t=0;t<n.length;t++){let o=ef(n[t],e);if(i.push(o),"error"===o.type)break}return i};function eb(t){return t.reduce((t,e)=>t+e.length,0)}function ew(t,e){if(t[0].length===e)return t.shift();let n=new Uint8Array(e),i=0;for(let o=0;o<e;o++)n[o]=t[0][i++],i===t[0].length&&(t.shift(),i=0);return t.length&&i<t[0].length&&(t[0]=t[0].slice(i)),n}function e_(t){if(t){var e=t;for(var n in e_.prototype)e[n]=e_.prototype[n];return e}}e_.prototype.on=e_.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e_.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},e_.prototype.off=e_.prototype.removeListener=e_.prototype.removeAllListeners=e_.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<i.length;o++)if((n=i[o])===e||n.fn===e){i.splice(o,1);break}return 0===i.length&&delete this._callbacks["$"+t],this},e_.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){n=n.slice(0);for(var i=0,o=n.length;i<o;++i)n[i].apply(this,e)}return this},e_.prototype.emitReserved=e_.prototype.emit,e_.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e_.prototype.hasListeners=function(t){return!!this.listeners(t).length};let eE="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),eS="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function eT(t,...e){return e.reduce((e,n)=>(t.hasOwnProperty(n)&&(e[n]=t[n]),e),{})}let ek=eS.setTimeout,eC=eS.clearTimeout;function eO(t,e){e.useNativeTimers?(t.setTimeoutFn=ek.bind(eS),t.clearTimeoutFn=eC.bind(eS)):(t.setTimeoutFn=eS.setTimeout.bind(eS),t.clearTimeoutFn=eS.clearTimeout.bind(eS))}function ex(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class eA extends Error{constructor(t,e,n){super(t),this.description=e,this.context=n,this.type="TransportError"}}class eD extends e_{constructor(t){super(),this.writable=!1,eO(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,n){return super.emitReserved("error",new eA(t,e,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){let e=ef(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){let t=this.opts.hostname;return -1===t.indexOf(":")?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(t){let e=function(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}(t);return e.length?"?"+e:""}}class eN extends eD{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";let e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let t=0;this._polling&&(t++,this.once("pollComplete",function(){--t||e()})),this.writable||(t++,this.once("drain",function(){--t||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){ey(t,this.socket.binaryType).forEach(t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){let t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,ev(t,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.opts.secure?"https":"http",e=this.query||{};return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=ex()),this.supportsBinary||e.sid||(e.b64=1),this.createUri(t,e)}}let eR=!1;try{eR="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){}let eP=eR;function eB(){}class eI extends eN{constructor(t){if(super(t),"undefined"!=typeof location){let e="https:"===location.protocol,n=location.port;n||(n=e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,e){let n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",(t,e)=>{this.onError("xhr post error",t,e)})}doPoll(){let t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(t,e)=>{this.onError("xhr poll error",t,e)}),this.pollXhr=t}}class eL extends e_{constructor(t,e,n){super(),this.createRequest=t,eO(this,n),this._opts=n,this._method=n.method||"GET",this._uri=e,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var t;let e=eT(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;let n=this._xhr=this.createRequest(e);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders)for(let t in n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0),this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(t)&&n.setRequestHeader(t,this._opts.extraHeaders[t])}catch(t){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{n.setRequestHeader("Accept","*/*")}catch(t){}null==(t=this._opts.cookieJar)||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var t;3===n.readyState&&(null==(t=this._opts.cookieJar)||t.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof n.status?n.status:0)},0))},n.send(this._data)}catch(t){this.setTimeoutFn(()=>{this._onError(t)},0);return}"undefined"!=typeof document&&(this._index=eL.requestsCount++,eL.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=eB,t)try{this._xhr.abort()}catch(t){}"undefined"!=typeof document&&delete eL.requests[this._index],this._xhr=null}}_onLoad(){let t=this._xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}function eM(){for(let t in eL.requests)eL.requests.hasOwnProperty(t)&&eL.requests[t].abort()}eL.requestsCount=0,eL.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",eM):"function"==typeof addEventListener&&addEventListener("onpagehide"in eS?"pagehide":"unload",eM,!1));let ej=function(){let t=eq({xdomain:!1});return t&&null!==t.responseType}();function eq(t){let e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||eP))return new XMLHttpRequest}catch(t){}if(!e)try{return new eS[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(t){}}let eF="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class eY extends eD{get name(){return"websocket"}doOpen(){let t=this.uri(),e=this.opts.protocols,n=eF?{}:eT(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,n)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let n=t[e],i=e===t.length-1;ea(n,this.supportsBinary,t=>{try{this.doWrite(n,t)}catch(t){}i&&eE(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=ex()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}}let eU=eS.WebSocket||eS.MozWebSocket,eX={websocket:class extends eY{createSocket(t,e,n){return eF?new eU(t,e,n):e?new eU(t,e):new eU(t)}doWrite(t,e){this.ws.send(e)}},webtransport:class extends eD{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(n=>{let i=function(t,n){e||(e=new TextDecoder);let i=[],o=0,r=-1,s=!1;return new TransformStream({transform(a,l){for(i.push(a);;){if(0===o){if(1>eb(i))break;let t=ew(i,1);s=(128&t[0])==128,o=(r=127&t[0])<126?3:126===r?1:2}else if(1===o){if(2>eb(i))break;let t=ew(i,2);r=new DataView(t.buffer,t.byteOffset,t.length).getUint16(0),o=3}else if(2===o){if(8>eb(i))break;let t=ew(i,8),e=new DataView(t.buffer,t.byteOffset,t.length),n=e.getUint32(0);if(n>2097151){l.enqueue(ei);break}r=0x100000000*n+e.getUint32(4),o=3}else{if(eb(i)<r)break;let t=ew(i,r);l.enqueue(ef(s?t:e.decode(t),n)),o=0}if(0===r||r>t){l.enqueue(ei);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),o=n.readable.pipeThrough(i).getReader(),r=new TransformStream({transform(e,n){var i;i=t=>{let i,o=t.length;if(o<126)new DataView((i=new Uint8Array(1)).buffer).setUint8(0,o);else if(o<65536){let t=new DataView((i=new Uint8Array(3)).buffer);t.setUint8(0,126),t.setUint16(1,o)}else{let t=new DataView((i=new Uint8Array(9)).buffer);t.setUint8(0,127),t.setBigUint64(1,BigInt(o))}e.data&&"string"!=typeof e.data&&(i[0]|=128),n.enqueue(i),n.enqueue(t)},eo&&e.data instanceof Blob?e.data.arrayBuffer().then(eh).then(i):er&&(e.data instanceof ArrayBuffer||es(e.data))?i(eh(e.data)):ea(e,!1,e=>{t||(t=new TextEncoder),i(t.encode(e))})}});r.readable.pipeTo(n.writable),this._writer=r.writable.getWriter();let s=()=>{o.read().then(({done:t,value:e})=>{t||(this.onPacket(e),s())}).catch(t=>{})};s();let a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let n=t[e],i=e===t.length-1;this._writer.write(n).then(()=>{i&&eE(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;null==(t=this._transport)||t.close()}},polling:class extends eI{constructor(t){super(t);let e=t&&t.forceBase64;this.supportsBinary=ej&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new eL(eq,this.uri(),t)}}},eH=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,eW=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function eV(t){if(t.length>8e3)throw"URI too long";let e=t,n=t.indexOf("["),i=t.indexOf("]");-1!=n&&-1!=i&&(t=t.substring(0,n)+t.substring(n,i).replace(/:/g,";")+t.substring(i,t.length));let o=eH.exec(t||""),r={},s=14;for(;s--;)r[eW[s]]=o[s]||"";return -1!=n&&-1!=i&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=function(t,e){let n=e.replace(/\/{2,9}/g,"/").split("/");return("/"==e.slice(0,1)||0===e.length)&&n.splice(0,1),"/"==e.slice(-1)&&n.splice(n.length-1,1),n}(0,r.path),r.queryKey=function(t,e){let n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,e,i){e&&(n[e]=i)}),n}(0,r.query),r}let ez="function"==typeof addEventListener&&"function"==typeof removeEventListener,e$=[];ez&&addEventListener("offline",()=>{e$.forEach(t=>t())},!1);class eK extends e_{constructor(t,e){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&"object"==typeof t&&(e=t,t=null),t){let n=eV(t);e.hostname=n.host,e.secure="https"===n.protocol||"wss"===n.protocol,e.port=n.port,n.query&&(e.query=n.query)}else e.host&&(e.hostname=eV(e.host).host);eO(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(t=>{let e=t.prototype.name;this.transports.push(e),this._transportsByName[e]=t}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(t){let e={},n=t.split("&");for(let t=0,i=n.length;t<i;t++){let i=n[t].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}(this.opts.query)),ez&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},e$.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){let e=Object.assign({},this.opts.query);e.EIO=4,e.transport=t,this.id&&(e.sid=this.id);let n=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);let t=this.opts.rememberUpgrade&&eK.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";let e=this.createTransport(t);e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",eK.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let e=Error("server error");e.code=t.data,this._onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let e=0;e<this.writeBuffer.length;e++){let n=this.writeBuffer[e].data;if(n&&(t+="string"==typeof n?function(t){let e=0,n=0;for(let i=0,o=t.length;i<o;i++)(e=t.charCodeAt(i))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(i++,n+=4);return n}(n):Math.ceil(1.33*(n.byteLength||n.size))),e>0&&t>this._maxPayload)return this.writeBuffer.slice(0,e);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,eE(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,e,n){return this._sendPacket("message",t,e,n),this}send(t,e,n){return this._sendPacket("message",t,e,n),this}_sendPacket(t,e,n,i){if("function"==typeof e&&(i=e,e=void 0),"function"==typeof n&&(i=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;let o={type:t,data:e,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){let t=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(eK.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ez&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let t=e$.indexOf(this._offlineEventListener);-1!==t&&e$.splice(t,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this._prevBufferLen=0}}}eK.protocol=4;class eJ extends eK{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),n=!1;eK.priorWebsocketSuccess=!1;let i=()=>{n||(e.send([{type:"ping",data:"probe"}]),e.once("packet",t=>{if(!n)if("pong"===t.type&&"probe"===t.data){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;eK.priorWebsocketSuccess="websocket"===e.name,this.transport.pause(()=>{n||"closed"!==this.readyState&&(h(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{let t=Error("probe error");t.transport=e.name,this.emitReserved("upgradeError",t)}}))};function o(){n||(n=!0,h(),e.close(),e=null)}let r=t=>{let n=Error("probe error: "+t);n.transport=e.name,o(),this.emitReserved("upgradeError",n)};function s(){r("transport closed")}function a(){r("socket closed")}function l(t){e&&t.name!==e.name&&o()}let h=()=>{e.removeListener("open",i),e.removeListener("error",r),e.removeListener("close",s),this.off("close",a),this.off("upgrading",l)};e.once("open",i),e.once("error",r),e.once("close",s),this.once("close",a),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==t?this.setTimeoutFn(()=>{n||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){let e=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}class eG extends eJ{constructor(t,e={}){let n="object"==typeof t?t:e;(!n.transports||n.transports&&"string"==typeof n.transports[0])&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(t=>eX[t]).filter(t=>!!t)),super(t,n)}}eG.protocol;var eQ={};n(eQ,"protocol",()=>e6),n(eQ,"PacketType",()=>o),n(eQ,"Encoder",()=>e5),n(eQ,"Decoder",()=>e9);let eZ="function"==typeof ArrayBuffer,e0=t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,e1=Object.prototype.toString,e2="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===e1.call(Blob),e3="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===e1.call(File);function e4(t){return eZ&&(t instanceof ArrayBuffer||e0(t))||e2&&t instanceof Blob||e3&&t instanceof File}let e8=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],e6=5;(i=o||(o={}))[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK";class e5{constructor(t){this.replacer=t}encode(t){return(t.type===o.EVENT||t.type===o.ACK)&&function t(e,n){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let n=0,i=e.length;n<i;n++)if(t(e[n]))return!0;return!1}if(e4(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1==arguments.length)return t(e.toJSON(),!0);for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return!0;return!1}(t)?this.encodeAsBinary({type:t.type===o.EVENT?o.BINARY_EVENT:o.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===o.BINARY_EVENT||t.type===o.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){let e=function(t){let e=[],n=t.data;return t.data=function t(e,n){if(!e)return e;if(e4(e)){let t={_placeholder:!0,num:n.length};return n.push(e),t}if(Array.isArray(e)){let i=Array(e.length);for(let o=0;o<e.length;o++)i[o]=t(e[o],n);return i}if("object"==typeof e&&!(e instanceof Date)){let i={};for(let o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=t(e[o],n));return i}return e}(n,e),t.attachments=e.length,{packet:t,buffers:e}}(t),n=this.encodeAsString(e.packet),i=e.buffers;return i.unshift(n),i}}function e7(t){return"[object Object]"===Object.prototype.toString.call(t)}class e9 extends e_{constructor(t){super(),this.reviver=t}add(t){let e;if("string"==typeof t){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");let n=(e=this.decodeString(t)).type===o.BINARY_EVENT;n||e.type===o.BINARY_ACK?(e.type=n?o.EVENT:o.ACK,this.reconstructor=new nt(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(e4(t)||t.base64)if(this.reconstructor)(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+t)}decodeString(t){let e=0,n={type:Number(t.charAt(0))};if(void 0===o[n.type])throw Error("unknown packet type "+n.type);if(n.type===o.BINARY_EVENT||n.type===o.BINARY_ACK){let i=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);let o=t.substring(i,e);if(o!=Number(o)||"-"!==t.charAt(e))throw Error("Illegal attachments");n.attachments=Number(o)}if("/"===t.charAt(e+1)){let i=e+1;for(;++e&&","!==t.charAt(e)&&e!==t.length;);n.nsp=t.substring(i,e)}else n.nsp="/";let i=t.charAt(e+1);if(""!==i&&Number(i)==i){let i=e+1;for(;++e;){let n=t.charAt(e);if(null==n||Number(n)!=n){--e;break}if(e===t.length)break}n.id=Number(t.substring(i,e+1))}if(t.charAt(++e)){let i=this.tryParse(t.substr(e));if(e9.isPayloadValid(n.type,i))n.data=i;else throw Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}static isPayloadValid(t,e){switch(t){case o.CONNECT:return e7(e);case o.DISCONNECT:return void 0===e;case o.CONNECT_ERROR:return"string"==typeof e||e7(e);case o.EVENT:case o.BINARY_EVENT:return Array.isArray(e)&&("number"==typeof e[0]||"string"==typeof e[0]&&-1===e8.indexOf(e[0]));case o.ACK:case o.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class nt{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e,n;let t=(e=this.reconPack,n=this.buffers,e.data=function t(e,n){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<n.length)return n[e.num];throw Error("illegal attachments")}if(Array.isArray(e))for(let i=0;i<e.length;i++)e[i]=t(e[i],n);else if("object"==typeof e)for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(e[i]=t(e[i],n));return e}(e.data,n),delete e.attachments,e);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function ne(t,e,n){return t.on(e,n),function(){t.off(e,n)}}let nn=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ni extends e_{constructor(t,e,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let t=this.io;this.subs=[ne(t,"open",this.onopen.bind(this)),ne(t,"packet",this.onpacket.bind(this)),ne(t,"error",this.onerror.bind(this)),ne(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var n,i,r;if(nn.hasOwnProperty(t))throw Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;let s={type:o.EVENT,data:e};if(s.options={},s.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){let t=this.ids++,n=e.pop();this._registerAckCallback(t,n),s.id=t}let a=null==(i=null==(n=this.io.engine)?void 0:n.transport)?void 0:i.writable,l=this.connected&&!(null==(r=this.io.engine)?void 0:r._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(t,e){var n;let i=null!=(n=this.flags.timeout)?n:this._opts.ackTimeout;if(void 0===i){this.acks[t]=e;return}let o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,Error("operation has timed out"))},i),r=(...t)=>{this.io.clearTimeoutFn(o),e.apply(this,t)};r.withError=!0,this.acks[t]=r}emitWithAck(t,...e){return new Promise((n,i)=>{let o=(t,e)=>t?i(t):n(e);o.withError=!0,e.push(o),this.emit(t,...e)})}_addToQueue(t){let e;"function"==typeof t[t.length-1]&&(e=t.pop());let n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((t,...i)=>{if(n===this._queue[0])return null!==t?n.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(t)):(this._queue.shift(),e&&e(null,...i)),n.pending=!1,this._drainQueue()}),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||0===this._queue.length)return;let e=this._queue[0];(!e.pending||t)&&(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:o.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(e=>String(e.id)===t)){let e=this.acks[t];delete this.acks[t],e.withError&&e.call(this,Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case o.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case o.EVENT:case o.BINARY_EVENT:this.onevent(t);break;case o.ACK:case o.BINARY_ACK:this.onack(t);break;case o.DISCONNECT:this.ondisconnect();break;case o.CONNECT_ERROR:this.destroy();let e=Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){let e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length)for(let e of this._anyListeners.slice())e.apply(this,t);super.emit.apply(this,t),this._pid&&t.length&&"string"==typeof t[t.length-1]&&(this._lastOffset=t[t.length-1])}ack(t){let e=this,n=!1;return function(...i){n||(n=!0,e.packet({type:o.ACK,id:t,data:i}))}}onack(t){let e=this.acks[t.id];"function"==typeof e&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:o.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){let e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n]){e.splice(n,1);break}}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){let e=this._anyOutgoingListeners;for(let n=0;n<e.length;n++)if(t===e[n]){e.splice(n,1);break}}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length)for(let e of this._anyOutgoingListeners.slice())e.apply(this,t.data)}}function no(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}no.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(1&Math.floor(10*e))==0?t-n:t+n}return 0|Math.min(t,this.max)},no.prototype.reset=function(){this.attempts=0},no.prototype.setMin=function(t){this.ms=t},no.prototype.setMax=function(t){this.max=t},no.prototype.setJitter=function(t){this.jitter=t};class nr extends e_{constructor(t,e){var n;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,eO(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!=(n=e.randomizationFactor)?n:.5),this.backoff=new no({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;let i=e.parser||eQ;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null==(e=this.backoff)||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null==(e=this.backoff)||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null==(e=this.backoff)||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new eG(this.uri,this.opts);let e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;let i=ne(e,"open",function(){n.onopen(),t&&t()}),o=e=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",e),t?t(e):this.maybeReconnectOnOpen()},r=ne(e,"error",o);if(!1!==this._timeout){let t=this._timeout,n=this.setTimeoutFn(()=>{i(),o(Error("timeout")),e.close()},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}return this.subs.push(i),this.subs.push(r),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let t=this.engine;this.subs.push(ne(t,"ping",this.onping.bind(this)),ne(t,"data",this.ondata.bind(this)),ne(t,"error",this.onerror.bind(this)),ne(t,"close",this.onclose.bind(this)),ne(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(t){this.onclose("parse error",t)}}ondecoded(t){eE(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new ni(this,t,e),this.nsps[t]=n),n}_destroy(t){for(let t of Object.keys(this.nsps))if(this.nsps[t].active)return;this._close()}_packet(t){let e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var n;this.cleanup(),null==(n=this.engine)||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let e=this.backoff.duration();this._reconnecting=!0;let n=this.setTimeoutFn(()=>{!t.skipReconnect&&(this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open(e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):t.onreconnect()}))},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){let t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}let ns={};function na(t,e){let n;"object"==typeof t&&(e=t,t=void 0);let i=function(t,e="",n){let i=t;n=n||"undefined"!=typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==n?n.protocol+"//"+t:"https://"+t),i=eV(t)),!i.port&&(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";let o=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+e,i.href=i.protocol+"://"+o+(n&&n.port===i.port?"":":"+i.port),i}(t,(e=e||{}).path||"/socket.io"),o=i.source,r=i.id,s=i.path,a=ns[r]&&s in ns[r].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||a?n=new nr(o,e):(ns[r]||(ns[r]=new nr(o,e)),n=ns[r]),i.query&&!e.query&&(e.query=i.queryKey),n.socket(i.path,e)}Object.assign(na,{Manager:nr,Socket:ni,io:na,connect:na});let nl=na();nl.on("connect",()=>{console.log("Control UI connected to backend server with Socket.IO:",nl.id)}),nl.on("disconnect",()=>{console.log("Control UI disconnected from Socket.IO server.")});let nh={};document.addEventListener("alpine:init",()=>{h.default.store("materials",{groups:{},load(){fetch("/api/block_materials").then(t=>t.json()).then(t=>{this.groups=t,console.log("Shared material data loaded into Alpine store.")})}})}),window.materialPicker=function(t,e){return{isOpen:!1,selected:t||"STONE",filter:"",paramName:e}},window.powerWidget=function(t){return{power:t,formValues:{},showAdminControls:!1,currentExecutionId:null,init(){this.power&&this.power.parameters&&this.power.parameters.forEach(t=>{this.formValues[t.name]=t.default}),window.addEventListener("control-mode-changed",t=>{this.showAdminControls=t.detail.editing}),nh[this.power.power_id]=this},removeWidget(){this.$dispatch("remove-widget-from-grid",{powerId:this.power.power_id}),nh[this.power.power_id]=null},updateStatus(t,e,n=""){console.log(`updateStatus called with: status=${t}, executionId=${e}`),this.status=t,this.errorMessage=n,"running"===t?this.currentExecutionId=e:this.currentExecutionId=null},executePower(){let t=this.$refs.paramsForm;if(!t)return void console.error("Could not find the parameters form for this widget!");let e=Object.fromEntries(new FormData(t).entries());e.power_id=this.power.power_id,this.status="running",fetch("/api/execute_power",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(t=>t.json()).then(t=>{t.execution_id?(this.currentExecutionId=t.execution_id,console.log(`Power execution started with ID: ${this.currentExecutionId}`)):this.updateStatus("error",null,t.error||"Failed to start execution.")}).catch(t=>{console.error("Fetch error during execution:",t),this.updateStatus("error",null,"Network error.")})},cancelPower(){this.currentExecutionId&&(console.log(`Sending cancellation for execution ID: ${this.currentExecutionId}`),fetch("/api/cancel_power",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({execution_id:this.currentExecutionId})}))}}},window.socket=nl,window.controlPanel=function(){return{powers:{},layout:{grid:{columns:4},widgets:[]},isEditing:!1,sortableInstance:null,powerStatuses:{},init(){h.default.store("materials").load(),console.log("Initializing control panel..."),window.socket&&nl.on("power_status",t=>{if(console.log("Received power status update:",t),this.powerStatuses[t.id]={status:t.status,message:t.message||"",execution_id:t.execution_id||null},"dispatched"!==t.status){let e=nh[t.id];e?e.updateStatus(t.status,t.execution_id,t.message||""):console.warn(`Could not find a registered widget for power ID: ${t.id}`)}}),this.$watch("isEditing",t=>{console.log(`Edit mode changed to: ${t}`),this.sortableInstance&&(console.log(`Setting drag-and-drop to ${t?"ENABLED":"DISABLED"}.`),this.sortableInstance.option("disabled",!t)),console.log(`Broadcasting event: control-mode-changed, editing: ${t}`),window.dispatchEvent(new CustomEvent("control-mode-changed",{detail:{editing:t}}))}),Promise.all([fetch("/api/control/layout").then(t=>t.json()),fetch("/api/powers?view=control").then(t=>t.json())]).then(([t,e,n])=>{this.layout=t,this.powers=e,console.log("Layout, powers, and material data loaded."),this.$nextTick(()=>{let t=document.getElementById("power-grid");t?(console.log("Alpine has rendered the widgets. Now processing them with htmx..."),window.Alpine.initTree(t),et.default.process(t),this.sortableInstance=new tH(t,{animation:150,onStart:e=>{t.setAttribute("x-ignore",""),console.log("Drag started: Applying x-ignore to grid.")},onEnd:e=>{t.removeAttribute("x-ignore"),console.log("Drag ended: Removing x-ignore from grid.")}}),this.sortableInstance.option("disabled",!0)):console.error("Could not find #power-grid to initialize SortableJS.")})})},getStatusForWidget(t){return this.powerStatuses[t]||{status:"Idle",message:"",execution_id:null}},refreshPowersData(){console.log("Refreshing full powers data from server..."),fetch("/api/powers?view=control").then(t=>t.json()).then(t=>{this.powers=t,console.log("Powers data has been updated.")})},getPowerData(t){return this.powers[t.power_id]||{name:"Unknown Power",parameters:[]}},addWidget(t){if(!t||this.layout.widgets.some(e=>e.power_id===t)){this.layout.widgets.some(e=>e.power_id===t)&&alert("This power is already on your control grid.");return}console.log(`Adding widget for power ID: ${t} to layout data.`),this.layout.widgets.push({power_id:t,position:[]}),this.$nextTick(()=>{console.log("Alpine has updated the DOM. Now processing the new widget with htmx.");let t=document.getElementById("power-grid");t&&t.lastElementChild&&(et.default.process(t.lastElementChild),console.log("New widget processed by htmx."))})},removeWidget(t){this.layout.widgets=this.layout.widgets.filter(e=>e.power_id!==t),console.log(`Removed widget for power: ${t}`)}}},window.Alpine=h.default,h.default.start();
//# sourceMappingURL=control.0754e065.js.map
