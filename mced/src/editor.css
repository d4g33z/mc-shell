/* General layout for the entire page */
html, body {
    height: 100vh; /* Use 100% of the viewport height */
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background-color: #f0f0f0;
    color: #333;
    overflow: hidden; /* Prevent the body itself from scrolling */
}

/* --- The Main Two-Panel Grid Layout --- */
.editor-layout {
    display: grid;
    /* This is the key: it defines two columns.
       The first is 300px wide. The second takes up the remaining space (1fr). */
    grid-template-columns: 300px 1fr;
    height: 100%;
    gap: 8px; /* A small gap between the panels */
    padding: 8px;
    box-sizing: border-box;
}

/* --- Left Panel: Power Library --- */
#power-library-panel {
    background-color: #ffffff;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    overflow-y: auto; /* Allow scrolling if the list of powers is long */
    min-width: 0;
}

#power-library-panel h2 {
    padding: 12px 16px;
    margin: 0;
    border-bottom: 1px solid #e0e0e0;
    font-size: 16px;
}

#power-list {
    padding: 8px;
    flex-grow: 1; /* Allow the list to fill the available space */
}

/* --- Right Panel: Main Content --- */
#main-content-panel {
    display: flex;
    flex-direction: column; /* Stack the toolbar, editor, and preview vertically */
    gap: 8px;
    min-width: 0;
}

#controls {
    flex-shrink: 0; /* Prevent the control bar from shrinking */
    background: #ffffff;
    padding: 8px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    display: flex;
    flex-wrap: wrap; /* Allow buttons to wrap on smaller screens */
    gap: 8px;
}

#controls button {
    padding: 6px 12px;
    border: 1px solid #ccc;
    background-color: #f7f7f7;
    border-radius: 4px;
    cursor: pointer;
}

#controls button:hover {
    background-color: #e9e9e9;
    border-color: #bbb;
}

#editor-preview-pane {
    flex-grow: 1; /* This pane will take up the remaining vertical space */
    display: flex;
    flex-direction: column; /* To stack Blockly and the code display */
    border: 1px solid #ccc;
    border-radius: 8px;
    overflow: hidden; /* Hide anything that spills out */
    background-color: #ffffff;
    min-height: 0; /* Add this for better flexbox behavior in some browsers */
}

#blocklyDiv {
    flex-grow: 1; /* Blockly editor takes up most of the space in this pane */
    position: relative; /* Needed for Blockly's UI elements */
}

#code-container {
    height: 250px; /* Or whatever height you prefer */
    flex-shrink: 0;
    margin: 0; /* <pre> tags have default margins, remove them */
    overflow: auto; /* IMPORTANT: This makes the code block scrollable */
    background-color: #272822; /* Matches the Okaidia theme background */
    color: #f8f8f2; /* Matches the Okaidia theme foreground text */
    border-top: 1px solid #444;
    font-family: 'Fira Code', 'Dank Mono', monospace; /* A nice coding font */
    font-size: 14px;
    line-height: 1.5;
    padding: 1em;
    box-sizing: border-box;

    /* --- ADD THESE TWO LINES TO FIX WRAPPING --- */
    white-space: pre-wrap;   /* Allows wrapping while preserving whitespace */
    word-break: break-all;     /* Breaks long words that would still overflow */
}

/* Prism's own styles will handle the token colors */
/* PrismJS theme might override background. Ensure it fits your design. */
/* The 'okaidia' theme has a dark background which works well. */