<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>MC-ED Editor</title>

        <link rel="stylesheet" href="./editor.css">

    </head>
    <body x-data="{ isModalOpen: false }">

        <div class="editor-layout">
            <aside id="power-library-panel">
                <h2>Power Library</h2>
                <div id="power-list" hx-get="/api/powers" hx-trigger="load" hx-swap="innerHTML">
                    <p style="padding: 0 8px; color: #888;">Loading powers...</p>
                </div>
            </aside>

            <main id="main-content-panel">

                <div id="controls">
                    <button id="newPowerButton">New Power</button>
                    <button id="savePowerAsButton" @click="isModalOpen = true">Save Power As...</button>
                    <button id="executePowerButton">Execute (Debug)</button>
                    <button id="clearWorkspaceButton">Clear Workspace</button>
                </div>

                <div id="editor-preview-pane">
                    <div id="blocklyDiv"></div>
                    <pre id="code-container" class="language-python" aria-live="polite"><code id="pythonCodeDisplay" class="language-python"># Python code will be generated here...</code></pre>
                </div>

            </main>
        </div>

        <template x-teleport="body">
            <div @keydown.escape.window="isModalOpen = false" class="modal-root">

                <div x-show="isModalOpen" x-cloak class="modal-overlay"
                     x-transition:enter="transition ease-out duration-200"
                     x-transition:enter-start="opacity-0"
                     x-transition:enter-end="opacity-100"
                     x-transition:leave="transition ease-in duration-200"
                     x-transition:leave-start="opacity-100"
                     x-transition:leave-end="opacity-0"
                     @click="isModalOpen = false">
                </div>

                <div x-show="isModalOpen" x-cloak class="modal-content" x-transition>
                    <h3>Save Power</h3>
                    <p>Enter the details for your new power.</p>
                    <div class="form-group">
                        <label for="powerName">Power Name</label>
                        <input type="text" id="powerName" placeholder="e.g., Build Tower">
                    </div>
                    <div class="form-group">
                        <label for="powerDescription">Description</label>
                        <textarea id="powerDescription" rows="3" placeholder="e.g., Creates a 10-block high cobblestone tower."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="powerCategory">Category</label>
                        <input type="text" id="powerCategory" placeholder="e.g., Construction, Utility">
                    </div>
                    <div class="modal-actions">
                        <button class="btn-secondary" @click="isModalOpen = false">Cancel</button>
                        <button class="btn-primary" id="confirmSaveButton">Save to Library</button>
                    </div>
                </div>
            </div>
        </template>

        <script type="module" src="./index.js"></script>
    </body>
</html>